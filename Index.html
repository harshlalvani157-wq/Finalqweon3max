<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Flipkart-style App — One File</title>
<style>
  /* ---------- Theme (Flipkart-inspired) ---------- */
  :root{
    --primary:#2874F0;   /* blue */
    --accent:#ffd600;    /* yellow */
    --bg:#f5f8ff;
    --card:#fff;
    --muted:#6b7280;
    --glass: rgba(255,255,255,0.8);
    --shadow: 0 8px 24px rgba(14,30,37,0.08);
    --radius:14px;
    --nav-height:66px;
    --safe-bottom: env(safe-area-inset-bottom, 12px);
    font-family: "Rajdhani", "Roboto", "Helvetica Neue", Arial, sans-serif;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#eef4ff);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
  *{box-sizing:border-box}
  a{color:inherit;text-decoration:none}

  /* ---------- App Shell ---------- */
  .app{height:100vh;display:flex;flex-direction:column;overflow:hidden}
  header.top{
    display:flex;align-items:center;gap:12px;padding:12px 14px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.8));box-shadow:var(--shadow);z-index:30;
  }
  .logo{
    width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#0b66d0);
    display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:20px;box-shadow:0 8px 20px rgba(40,116,240,0.16)
  }
  .searchbar{flex:1;display:flex;align-items:center;background:var(--card);padding:8px 12px;border-radius:12px;gap:8px;box-shadow:0 6px 14px rgba(15,23,42,0.04)}
  .searchbar input{border:0;outline:none;font-size:14px;background:transparent;width:100%}
  .top-right{display:flex;gap:10px;align-items:center}

  /* ---------- Content ---------- */
  main.content{flex:1;overflow:auto;padding:12px 12px calc(var(--nav-height) + var(--safe-bottom) + 18px); -webkit-overflow-scrolling:touch;}

  /* category row */
  .cats{display:flex;gap:10px;overflow:auto;padding:6px 4px 12px}
  .cats::-webkit-scrollbar{display:none}
  .cat{flex:0 0 auto;padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,#fff,#f7fbff);display:flex;gap:8px;align-items:center;min-width:90px;box-shadow:var(--shadow);cursor:pointer;border:1px solid rgba(16,24,40,0.03)}
  .cat img{width:36px;height:36px;border-radius:8px;object-fit:cover}

  /* hero carousel */
  .hero{display:flex;gap:12px;overflow:auto;padding-bottom:10px;scroll-snap-type:x mandatory}
  .hero::-webkit-scrollbar{display:none}
  .hero-card{flex:0 0 86%;background:linear-gradient(90deg,#fff,#f0f7ff);padding:16px;border-radius:14px;box-shadow:var(--shadow);display:flex;align-items:center;gap:12px;scroll-snap-align:center;position:relative}
  .hero-card img{width:36%;max-width:28vh;border-radius:12px;object-fit:cover}
  .ctabtn{background:var(--primary);color:white;padding:10px 14px;border-radius:12px;font-weight:700;box-shadow:0 10px 26px rgba(40,116,240,0.14);cursor:pointer}

  /* horizontal strip (popular brands) */
  .strip{display:flex;gap:12px;overflow:auto;padding:8px 2px 0}
  .brand{flex:0 0 auto;width:120px;height:120px;border-radius:12px;background:white;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:12px;box-shadow:var(--shadow);cursor:pointer}
  .brand img{width:64px;height:64px;object-fit:cover;border-radius:10px}

  /* products grid */
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
  .card{background:var(--card);border-radius:12px;padding:10px;box-shadow:0 10px 22px rgba(10,20,36,0.06);cursor:pointer;transition:transform .22s ease, box-shadow .22s ease}
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(14,30,37,0.12)}
  .imgwrap{height:160px;border-radius:10px;overflow:hidden;background:linear-gradient(180deg,#f6fbff,#ffffff);display:flex;align-items:center;justify-content:center}
  .imgwrap img{max-width:100%;max-height:100%;object-fit:contain;transition:transform .4s}
  .card:hover .imgwrap img{transform:scale(1.05)}
  .title{font-size:14px;font-weight:600;margin-top:8px;min-height:38px}
  .price{font-weight:800;color:var(--primary);margin-top:6px}
  .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:12px;margin-top:6px}

  /* load more / end text */
  .loader{grid-column:1/-1;text-align:center;color:var(--muted);padding:10px}

  /* bottom navigation (android style) */
  nav.bottom{position:fixed;left:12px;right:12px;bottom:calc(10px + var(--safe-bottom));height:var(--nav-height);background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.95));border-radius:16px;display:flex;align-items:center;justify-content:space-around;padding:8px 10px;box-shadow:0 24px 60px rgba(8,20,40,0.12);z-index:60}
  .nav-item{flex:1;text-align:center;font-size:12px;color:var(--muted);display:flex;flex-direction:column;align-items:center;gap:4px;padding:6px;border-radius:10px;user-select:none;cursor:pointer}
  .nav-item.active{color:var(--primary);font-weight:700}
  .nav-item svg{width:22px;height:22px;display:block}

  /* product detail overlay */
  .overlay{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:linear-gradient(180deg,rgba(3,6,23,0.36),rgba(3,6,23,0.22));z-index:120;padding:18px}
  .sheet{width:100%;max-width:900px;background:linear-gradient(180deg,#fff,#fbfdff);border-radius:18px;padding:14px;box-shadow:0 30px 80px rgba(2,6,23,0.45);transform:translateY(30px);opacity:0;transition:transform .28s cubic-bezier(.2,.9,.3,1),opacity .22s}
  .overlay.show{display:flex} .overlay.show .sheet{transform:translateY(0);opacity:1}
  .drag{width:64px;height:6px;background:#ebeff7;border-radius:6px;margin:6px auto}

  /* responsive */
  @media(min-width:900px){ .grid{grid-template-columns:repeat(3,1fr)} .hero-card{flex:0 0 60%} }

  /* small animations */
  @keyframes pulse {0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
  .pulse{animation:pulse 3s ease-in-out infinite}
  /* subtle shimmer for loading images */
  .shimmer{background:linear-gradient(90deg,#f0f3ff 0%,#e8eefc 50%,#f0f3ff 100%);background-size:200% 100%;animation:shimmer 1.6s linear infinite}
  @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
</style>
</head>
<body>
<div class="app" role="application" aria-label="Shopping app">

  <!-- Top -->
  <header class="top" role="banner">
    <div class="logo" aria-hidden="true">S</div>
    <div class="searchbar" role="search" aria-label="Search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#111827" stroke-width="1.6" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="#111827" stroke-width="1.6"/></svg>
      <input id="search" placeholder="Search for products, brands and more" aria-label="Search input">
      <div style="display:flex;gap:8px" aria-hidden="true">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.5 9h-12L4 3H2" stroke="#111827" stroke-width="1.4"/></svg>
      </div>
    </div>
    <div class="top-right" aria-hidden="true">
      <div style="font-size:12px;color:var(--muted)">Deliver to</div>
    </div>
  </header>

  <!-- Main scrolling area -->
  <main class="content" id="mainContent" role="main" aria-live="polite">
    <!-- categories -->
    <div class="cats" id="cats"></div>

    <!-- hero -->
    <div class="hero" id="hero">
      <!-- hero cards appended by JS -->
    </div>

    <!-- brand strip -->
    <div style="display:flex;align-items:center;justify-content:space-between;margin-top:8px">
      <h3 style="margin:0">Popular brands</h3>
      <small style="color:var(--muted)">See all</small>
    </div>
    <div class="strip" id="brands"></div>

    <!-- grid header -->
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <h3 style="margin:0">Recommended for you</h3>
      <div style="color:var(--muted);font-size:13px">Trending</div>
    </div>

    <!-- product grid -->
    <div class="grid" id="grid"></div>
    <div class="loader" id="loaderText"></div>
  </main>

  <!-- bottom nav -->
  <nav class="bottom" role="navigation" aria-label="Bottom navigation">
    <div class="nav-item active" data-tab="home" aria-current="page">
      <svg viewBox="0 0 24 24" fill="none"><path d="M3 11.5L12 4l9 7.5" stroke="currentColor" stroke-width="1.6"/></svg>
      Home
    </div>
    <div class="nav-item" data-tab="categories"><svg viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="8" height="8" rx="1.5" stroke="currentColor" stroke-width="1.6"/><rect x="13" y="13" width="8" height="8" rx="1.5" stroke="currentColor" stroke-width="1.6"/></svg>Categories</div>
    <div class="nav-item" data-tab="cart"><svg viewBox="0 0 24 24" fill="none"><path d="M3 3h2l.4 2M7 13h10l4-8H5.4" stroke="currentColor" stroke-width="1.6"/></svg>Cart</div>
    <div class="nav-item" data-tab="more"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="1.5" fill="currentColor"/><circle cx="6" cy="12" r="1.5" fill="currentColor"/><circle cx="18" cy="12" r="1.5" fill="currentColor"/></svg>More</div>
  </nav>

  <!-- overlay product sheet -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="sheet" id="sheet">
      <div class="drag" aria-hidden="true"></div>
      <div style="display:flex;gap:16px;align-items:flex-start">
        <div style="flex:1;min-width:48%">
          <div class="imgwrap" id="detailImg" style="height:260px"></div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <button id="buyNow" style="flex:1;padding:12px;border-radius:10px;border:0;background:var(--accent);font-weight:800">BUY NOW</button>
            <button id="addCart" style="flex:1;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)">ADD</button>
          </div>
        </div>
        <div style="flex:1.2">
          <h2 id="detailTitle" style="margin:0 0 6px">Product title</h2>
          <div style="font-weight:800;font-size:20px;color:var(--primary)" id="detailPrice">₹999</div>
          <div style="margin-top:10px;color:var(--muted)" id="detailDesc">Product details shown here. This opens as a sheet overlay — no page change.</div>
          <ul style="margin-top:12px;color:var(--muted);padding-left:18px">
            <li>Free delivery</li>
            <li>7 days replacement</li>
            <li>Cash on delivery available</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
/* ========= Data ========= */
const CATEGORIES = [
  {id:'mob',title:'Mobiles',img:'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&q=60'},
  {id:'elec',title:'Electronics',img:'https://images.unsplash.com/photo-1518779578993-0b6c6a3b9b0f?w=400&q=60'},
  {id:'fash',title:'Fashion',img:'https://images.unsplash.com/photo-1520975917460-57b6a1433d9a?w=400&q=60'},
  {id:'home',title:'Home',img:'https://images.unsplash.com/photo-1505691723518-36a3a3a1f6b1?w=400&q=60'},
  {id:'appl',title:'Appliances',img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&q=60'},
  {id:'beauty',title:'Beauty',img:'https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=400&q=60'},
  {id:'toys',title:'Toys',img:'https://images.unsplash.com/photo-1526178612684-7a1e2a8b8c0a?w=400&q=60'},
];

const BRANDS = [
  'https://picsum.photos/seed/b1/200/200','https://picsum.photos/seed/b2/200/200','https://picsum.photos/seed/b3/200/200',
  'https://picsum.photos/seed/b4/200/200','https://picsum.photos/seed/b5/200/200','https://picsum.photos/seed/b6/200/200'
];

const PRODUCTS=[];
for(let i=1;i<=120;i++){
  PRODUCTS.push({
    id:'p'+i,
    title:`Amazing Product ${i}`,
    price: Math.floor(199 + Math.random()*24999),
    img:`https://picsum.photos/seed/prod${i}/600/600`
  });
}

/* ========= DOM references ========= */
const catsEl = document.getElementById('cats');
const heroEl = document.getElementById('hero');
const brandsEl = document.getElementById('brands');
const gridEl = document.getElementById('grid');
const loaderText = document.getElementById('loaderText');
const mainContent = document.getElementById('mainContent');
const overlay = document.getElementById('overlay');
const sheet = document.getElementById('sheet');
const detailImg = document.getElementById('detailImg');
const detailTitle = document.getElementById('detailTitle');
const detailPrice = document.getElementById('detailPrice');
const detailDesc = document.getElementById('detailDesc');

/* ========= Build UI ========= */
function buildCategories(){
  CATEGORIES.forEach(c=>{
    const el = document.createElement('div'); el.className='cat';
    el.innerHTML = `<img src="${c.img}" alt="${c.title}"/><div style="font-weight:700">${c.title}</div>`;
    el.onclick = ()=>showCategory(c.title);
    catsEl.appendChild(el);
  });
}
function buildHero(){
  for(let i=1;i<=3;i++){
    const card = document.createElement('div'); card.className='hero-card';
    card.innerHTML = `<div style="flex:1">
        <div style="font-size:20px;font-weight:800">Big Offers ${i}</div>
        <div style="color:var(--muted);margin-top:6px">Up to 80% off — Limited time</div>
        <div style="margin-top:12px"><button class="ctabtn">Shop now</button></div>
      </div>
      <img src="https://picsum.photos/seed/hero${i}/480/320" alt="hero image"/>`;
    heroEl.appendChild(card);
  }
}
function buildBrands(){
  BRANDS.forEach(u=>{
    const b = document.createElement('div'); b.className='brand';
    b.innerHTML = `<img src="${u}" alt="brand"/><div style="font-weight:700;font-size:13px">Brand</div>`;
    b.onclick = ()=>alert('Brand tapped');
    brandsEl.appendChild(b);
  });
}

/* ========= Product grid & infinite load ========= */
let perPage = 10, loaded = 0;
function makeProductCard(p){
  const el = document.createElement('div'); el.className='card';
  el.innerHTML = `<div style="position:relative">
      <div class="imgwrap"><img src="${p.img}" alt="${p.title}" loading="lazy"/></div>
    </div>
    <div class="title">${p.title}</div>
    <div class="price">₹${p.price.toLocaleString()}</div>
    <div class="meta"><div>4.3 ★</div><div style="font-weight:700;color:var(--muted)">Offer</div></div>`;
  el.onclick = ()=>openProduct(p);
  // subtle pointer tilt
  el.addEventListener('mousemove',(ev)=>{
    const r=el.getBoundingClientRect(); const cx=(ev.clientX-r.left)-r.width/2; const cy=(ev.clientY-r.top)-r.height/2;
    const rx = (-cy/r.height)*6; const ry = (cx/r.width)*6; el.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
  });
  el.addEventListener('mouseleave', ()=> el.style.transform = '');
  return el;
}
function loadMore(){
  const next = PRODUCTS.slice(loaded, loaded+perPage);
  next.forEach(p => gridEl.appendChild(makeProductCard(p)));
  loaded += next.length;
  if(loaded < PRODUCTS.length){
    loaderText.textContent = 'Scroll down to load more products';
  } else {
    loaderText.textContent = 'You reached the end';
  }
}

/* initial */
buildCategories(); buildHero(); buildBrands(); loadMore();

/* infinite-ish load on mainContent scroll */
mainContent.addEventListener('scroll', ()=>{
  const bottom = mainContent.scrollTop + mainContent.clientHeight;
  if(bottom > mainContent.scrollHeight - 260 && loaded < PRODUCTS.length){
    loaderText.textContent = 'Loading more...';
    setTimeout(()=> loadMore(), 600);
  }
});

/* search */
document.getElementById('search').addEventListener('input', e=>{
  const q = e.target.value.trim().toLowerCase();
  if(!q){ gridEl.innerHTML=''; loaded=0; loadMore(); return; }
  const matched = PRODUCTS.filter(p => (p.title + p.price).toLowerCase().includes(q)).slice(0,36);
  gridEl.innerHTML = ''; matched.forEach(p=> gridEl.appendChild(makeProductCard(p))); loaderText.textContent = matched.length? '' : 'No results';
});

/* category filter */
function showCategory(name){
  gridEl.innerHTML = '';
  const items = PRODUCTS.slice(0,30).map((p,i)=> ({...p, title: name + ' ' + p.title}));
  items.forEach(p => gridEl.appendChild(makeProductCard(p)));
  loaderText.textContent = '';
}

/* open product sheet (in-place overlay) */
function openProduct(p){
  detailTitle.textContent = p.title;
  detailPrice.textContent = '₹' + p.price.toLocaleString();
  detailDesc.textContent = 'High quality product. This overlay opens so user stays in the app (no page navigation).';
  detailImg.innerHTML = `<img src="${p.img}" style="max-width:100%;max-height:100%" alt="${p.title}">`;
  overlay.classList.add('show');
  // focus for accessibility
  sheet.focus();
}
overlay.addEventListener('click', e => { if(e.target === overlay) overlay.classList.remove('show'); });
document.addEventListener('keydown', e=> { if(e.key === 'Escape') overlay.classList.remove('show'); });

/* bottom nav single-page */
document.querySelectorAll('.nav-item').forEach(item=>{
  item.addEventListener('click', ()=>{
    document.querySelectorAll('.nav-item').forEach(n=>{ n.classList.remove('active'); n.removeAttribute('aria-current'); });
    item.classList.add('active'); item.setAttribute('aria-current','page');
    const tab = item.dataset.tab;
    if(tab === 'home'){
      gridEl.innerHTML=''; loaded=0; loadMore();
    } else if(tab === 'categories'){
      gridEl.innerHTML='';
      CATEGORIES.forEach(c=>{
        const big = document.createElement('div'); big.className='card'; big.style.gridColumn='span 2';
        big.innerHTML = `<div style="height:140px;border-radius:12px;overflow:hidden"><img src="${c.img}" style="width:100%;height:100%;object-fit:cover"/></div><div style="font-weight:800;margin-top:8px">${c.title}</div><div style="color:var(--muted)">Explore ${c.title}</div>`;
        big.onclick = ()=>showCategory(c.title);
        gridEl.appendChild(big);
      });
      loaderText.textContent = '';
    } else if(tab === 'cart'){
      gridEl.innerHTML = '';
      const box = document.createElement('div'); box.className='card'; box.style.gridColumn='1/-1';
      box.innerHTML = `<h3 style="margin:0 0 8px 0">Your Cart</h3><p style="color:var(--muted)">Cart is empty. Add products to see them here.</p><div style="margin-top:12px"><button style="padding:10px;border-radius:10px;background:var(--primary);color:white;border:0">Shop now</button></div>`;
      gridEl.appendChild(box);
      loaderText.textContent = '';
    } else if(tab === 'more'){
      gridEl.innerHTML = '';
      const moreBox = document.createElement('div'); moreBox.className='card'; moreBox.style.gridColumn='1/-1';
      moreBox.innerHTML = `<h3 style="margin:0">More</h3><ul style="color:var(--muted);padding-left:18px"><li>Orders</li><li>Wishlist</li><li>Coupons</li><li>Account settings</li></ul>`;
      gridEl.appendChild(moreBox);
      loaderText.textContent = '';
    }
    window.scrollTo({top:0,behavior:'smooth'});
  });
});

/* small optional: auto-scroll hero every 4s */
let heroIdx=0;
setInterval(()=>{
  const cards = heroEl.querySelectorAll('.hero-card');
  if(cards.length){
    heroIdx = (heroIdx + 1) % cards.length;
    cards[heroIdx].scrollIntoView({behavior:'smooth',inline:'center'});
  }
},4000);

/* Prevent background scroll when overlay open (mobile) */
const observer = new MutationObserver(()=> {
  if(overlay.classList.contains('show')) document.body.style.overflow='hidden'; else document.body.style.overflow='';
});
observer.observe(overlay, {attributes:true,class:true});

</script>
</body>
</html>
